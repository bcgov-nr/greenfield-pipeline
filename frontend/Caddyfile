{
	auto_https off
	admin off
	debug
}
:3000 {
	log {
		output stdout
		format console {
			time_format iso8601
			level_format color
		}
		level debug
	}
	root * /app/dist
	encode zstd gzip
	file_server
	@spa_router {
        not path /api/*
        file {
            try_files {path} /index.html
        }
    }
    rewrite @spa_router {http.matchers.file.relative}
	# Proxy requests to API service
    route /api/* {
        reverse_proxy {$BACKEND_URL}
    }
}
:3001 {
  handle /health {
	  respond "OK"
  }
}
